<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Documents â€“ KindVisit</title>
  <meta name="description" content="Official KindVisit documents, reports, and resources." />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/mobile.css" media="(max-width: 900px)">
  <link rel="icon" type="image/png" href="assets/favicon-32.png">
</head>

<body>
<header class="site-header">
  <div class="header-row">
    <a class="brand" href="index.html">
      <img src="assets/logoh.png" alt="KindVisit" />
    </a>
  </div>
</header>

<main class="container-two" style="padding-top:calc(var(--header-offset) + 40px);">
  <section class="section">
    <div class="section-head">
      <h2>Documents & Resources</h2>
    </div>
    <p class="muted">All available PDFs are listed below. Click to view or download.</p>

    <ul id="pdf-list" style="list-style:none; padding:0; margin-top:20px; display:grid; gap:12px;">
      <li class="muted">Loading documents...</li>
    </ul>
  </section>
</main>

<footer>
  <div class="footer-bar">
    <ul class="footer-links">
      <li><a href="index.html">Opportunities</a></li>
      <li><a href="#">How it works</a></li>
      <li><a href="#">Impact</a></li>
      <li><a href="#">FAQ</a></li>
      <li><a href="#">Submit your project</a></li>
      <li><a href="#">NGO onboarding</a></li>
      <li><a href="#">Hotels & Agencies</a></li>
      <li><a href="#">Press kit</a></li>
      <li><a href="documents.html">Documents</a></li>
    </ul>
    <div class="footer-copy">Â© KindVisit 2025</div>
  </div>
</footer>

<script>
async function loadPDFs() {
  const container = document.getElementById('pdf-list');

  // helper to turn "my-file.pdf" into "My file"
  const pretty = (name) =>
    name.replace(/\.pdf$/i, '')
        .replace(/[-_]+/g, ' ')
        .replace(/\b\w/g, c => c.toUpperCase());

  try {
    const res = await fetch('docs/list.json', { cache: 'no-store' });
    if (!res.ok) throw new Error('list.json not found');
    const items = await res.json();

    container.innerHTML = '';

    if (!Array.isArray(items) || items.length === 0) {
      container.innerHTML = '<li class="muted">No documents found.</li>';
      return;
    }

    for (const it of items) {
      const file = (it && it.file) ? it.file : '';
      if (!file.toLowerCase().endsWith('.pdf')) continue;

      const title = (it && it.title) ? it.title : pretty(file);

      const li = document.createElement('li');
      li.innerHTML = `<a href="docs/${encodeURIComponent(file)}"
                         target="_blank"
                         class="btn btn-outline">ðŸ“„ ${title}</a>`;
      container.appendChild(li);
    }

    if (!container.children.length) {
      container.innerHTML = '<li class="muted">No documents found.</li>';
    }
  } catch (err) {
    console.error('Error loading PDFs:', err);
    container.innerHTML = '<li class="muted">Unable to load documents.</li>';
  }
}

loadPDFs();
</script>
</body>
</html>
